
@model IEnumerable<DomainLayer.Users.UserRegistration>

@{
    ViewData["Title"] = "Mobizone(Admin) Userdata";
}
<link rel="stylesheet" href=
"https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" />

@*<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
*@
<script type="text/javascript" charset="utf8" src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
@*<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>*@
<script src="https://cdn.datatables.net/1.10.9/js/jquery.dataTables.min.js" defer></script>

<div class="container-fluid mt-3 align-middle">
    <div class="card shadow-lg p-3 mb-5 bg-white rounded">
        <div class="card-body">
            <div class="">

<table id="datatable" class="table table-bordered table-hover table-sm" style="width:100%">
    <thead>
        <tr>
            <th>
                Name
            </th>
            <th>
                @Html.DisplayNameFor(model => model.createdOn)
            </th>
            
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
        <tr style="margin-left:5%">
            <td >
                @Html.DisplayFor(modelItem => item.FirstName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.createdOn)
            </td>
            
        </tr>
}
    </tbody>
</table>
</div>
</div>
</div>
</div>

<script>
    var getProductLink;
    var header;
    //configLink(GetProductData);
    configLink(header);
    //header(GetProductData);
    //GetProductData();
    function configLink(callback) {
        $.ajax({
            url: '/config/getapi',
            type: 'get',
            dataType: 'json',
            success: function (data) {
                //console.log(data)
                getProductLink = data + 'api/users/userdata';
                header(getUserData);
            }
        })
    }
    function header(callback) {
        $.ajax({
            url: '/config/GetHeader',
            type: 'get',
            dataType: 'json',
            success: function (data) {
                //console.log(data)
                header = data;
                callback();

            }
        })
    }
    function getUserData() {
        debugger
        $.ajax({
            url: getProductLink,
            type: 'get',
            datatype: 'json',
            beforeSend: function (xhr) {
                xhr.setRequestHeader("Authorization", "Basic " + header);
            },
            success: function (data) {
                //console.log(data.result);
                $('#datatable').dataTable({
                    data: data.result,
                    columns: [
                        {
                            'render': function (data, type, full, meta) {
                                return full.firstName +" "+ full.lastName } },
                        { 'data': 'createdOn' }
                    ]
                })
            }
        })
    }
</script>
@*<style>
    .paddingIssue {
        padding-top: 80px;
    }
</style>*@